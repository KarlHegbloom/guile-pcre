CC = @CC@
CFLAGS = @GUILE_CFLAGS@
LIBS   = @GUILE_LIBS@

CFLAGS += -Wall -Wextra -Werror
CFLAGS += -fPIC
CFLAGS += -g

LDFLAGS += -lpcre $(LIBS)
LDFLAGS += -g

all: libguile-pcre.so

install: all
	cp libguile-pcre.so ~/local/lib

libguile-pcre.so: guile-pcre.o
	$(LD) $(LDFLAGS) -shared -o $@ $^

guile-pcre.o: guile-pcre.c guile-pcre.h Makefile

clean:
	-rm -rf libguile-pcre.so *.o
